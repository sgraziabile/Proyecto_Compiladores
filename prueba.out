.CODE 
PUSH lblMetmain@Init
CALL
HALT

simple_heap_init: RET 0	; Retorna inmediatamente 

simple_malloc: LOADFP	; Inicialización unidad
LOADSP 
STOREFP ; Finaliza inicialización del RA
LOADHL	; hlDUP	; hl
PUSH 1	; 1
ADD	; hl+1
STORE 4 ; Guarda el resultado (un puntero a la primer celda de la región de memoria)
LOAD 3	; Carga la cantidad de celdas a alojar (parámetro que debe ser positivo)
ADD
STOREHL ; Mueve el heap limit (hl). Expande el heap
STOREFP
RET 1	; Retorna eliminando el parámetro

.DATA
lblVTObject: NOP

.CODE
lblConstructor@Object:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 0 ; Libera el espacio de los parametros de Object

lblMetdebugPrint@Object:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
LOAD 3    ; Apila el parametro
IPRINT    ; Imprime el entero en el tope de la pila
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de debugPrint


lblVTSystem: NOP

.CODE

lblConstructor@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 0 ; Libera el espacio de los parametros de System

lblMetread@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 0 ; Libera el espacio de los parametros de read

lblMetprintB@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de printB

lblMetprintC@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de printC

lblMetprintI@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de printI

lblMetprintS@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de printS

lblMetprintln@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 0 ; Libera el espacio de los parametros de println

lblMetprintBln@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de printBln

lblMetprintCln@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de printCln

lblMetprintIln@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de printIln

lblMetprintSln@System:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 1 ; Libera el espacio de los parametros de printSln


lblVTString: NOP

.CODE

lblConstructor@String:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 0 ; Libera el espacio de los parametros de String


lblVTInit: NOP

.CODE

lblMetmain@Init:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
PUSH 1234 ; Apila el valor
PUSH lblMetdebugPrint@Object ; Apila el metodo
CALL ; Llama al metodo
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 0 ; Libera el espacio de los parametros de main

lblMetm1@Init:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 2 ; Libera el espacio de los parametros de m1

lblConstructor@Init:LOADFP ; Apila el valor del registro
LOADSP ; Apila el valor en el registro sp
STOREFP ; Almacena el tope de la pila en el registro
FMEM 0 ; Libera espacio de variables locales
STOREFP ; Almacena el tope de la pila en el registro 
RET 0 ; Libera el espacio de los parametros de Init


